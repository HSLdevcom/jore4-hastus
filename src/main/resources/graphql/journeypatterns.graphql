query JourneyPatternsForRoutes(
  $route_labels: [String!]!
  $validity_start: date!,
  $validity_end: date!
) {
  route_route(
    where: {
      _and: [
        { unique_label: { _in: $route_labels } }
        {
          _or: [
            { validity_start: { _is_null: true } }
            { validity_start: { _lte: $validity_start } }
          ]
        }
        {
          _or: [
            { validity_end: { _is_null: true } }
            { validity_end: { _gte: $validity_end } }
          ]
        }
      ]
    }
    order_by: {
      unique_label: asc
    }
  ) {
    unique_label
    route_journey_patterns {
      journey_pattern_id
      scheduled_stop_point_in_journey_patterns(order_by: {scheduled_stop_point_sequence: asc}) {
        scheduled_stop_point_label
        scheduled_stop_point_sequence
        scheduled_stop_points {
          scheduled_stop_point_id
          timing_place {
            label
            timing_place_id
          }
        }
      }
    }
    route_line {
      type_of_line
    }
  }
}
